% Use preferred fonts.
\setmainfont{Lato}
\setsansfont{Lato}

\sphinxsetup{
  % Don't use a dark blue as the title colour.
  TitleColor={RGB}{10,10,10},
  % Only attention, caution, danger, error and warning admonitions can be
  % configured by default, because they use the "heavybox" style. Remove all of
  % the borders and set the background to red.
  attentionBgColor={RGB}{255,237,204},
  attentionborder=0pt,
  cautionBgColor={RGB}{255,237,204},
  cautionborder=0pt,
  dangerBgColor={RGB}{253,243,242},
  dangerborder=0pt,
  errorBgColor={RGB}{253,243,242},
  errorborder=0pt,
  warningBgColor={RGB}{255,237,204},
  warningborder=0pt,
  % Remove the border of other admonition types.
  importantborder=0pt,
  hintborder=0pt,
  tipborder=0pt,
  noteborder=0pt,
}

% Use heavyboxes for the other admonition types too.
\renewenvironment{sphinxnote}[1]
  {\begin{sphinxheavybox}\sphinxstrong{#1} }{\end{sphinxheavybox}}
\renewenvironment{sphinxhint}[1]
  {\begin{sphinxheavybox}\sphinxstrong{#1} }{\end{sphinxheavybox}}
\renewenvironment{sphinximportant}[1]
  {\begin{sphinxheavybox}\sphinxstrong{#1} }{\end{sphinxheavybox}}
\renewenvironment{sphinxtip}[1]
  {\begin{sphinxheavybox}\sphinxstrong{#1} }{\end{sphinxheavybox}}

% Because hint, important, note, tip and todo normally use "lightbox" style,
% Sphinx doesn't expose options for tweaking the background colour - so set
% these manually.
\definecolor{sphinxhintBgColor}{RGB}{219,250,244}
\definecolor{sphinximportantBgColor}{RGB}{219,250,244}
\definecolor{sphinxnoteBgColor}{RGB}{231,242,250}
\definecolor{sphinxtipBgColor}{RGB}{219,250,244}
\definecolor{sphinxtodoBgColor}{RGB}{255,237,204}

% Add copyright footer to almost all pages.  For 'manual' style we have options
% for putting a copyright notice near the beginning, but for 'howto' style we
% do not.  For now just use the footer in all PDFs.
%
% Upstream issue for this: https://github.com/sphinx-doc/sphinx/issues/2876
%
% This is overriding upstream footer code, and having to manually redo parts of
% it.  That's not great, but upstream doesn't give us any other tools for
% extending the footer.
%
% There are two styles because the page that starts a chapter has a different
% footer style from other pages.
%
% Based on https://stackoverflow.com/a/54262480
\makeatletter
   \fancypagestyle{normal}{
    \fancyhf{}
    \fancyfoot[LE,RO]{{\py@HeaderFamily\thepage}}
    \fancyfoot[LO,RE]{{\codeplaycopyright}}
    \fancyhead[LE,RO]{{\py@HeaderFamily \@title\sphinxheadercomma\py@release}}
    \renewcommand{\headrulewidth}{0.4pt}
    \renewcommand{\footrulewidth}{0.4pt}
    }
   \fancypagestyle{plain}{
    \fancyhf{}
    \fancyfoot[LE,RO]{{\py@HeaderFamily\thepage}}
    \renewcommand{\headrulewidth}{0pt}
    \renewcommand{\footrulewidth}{0.4pt}
    \fancyfoot[LO,RE]{{\codeplaycopyright}}
    }
\makeatother
